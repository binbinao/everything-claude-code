---
sidebar_position: 6
title: æ€§èƒ½ä¼˜åŒ–
description: æŒæ¡ ECC æ€§èƒ½åˆ†æä¸ä¼˜åŒ–ç­–ç•¥ - äº¤äº’å¼æ•™ç¨‹
---

import { CommandSimulator, StepByStep, CodePlayground, Quiz } from '@site/src/components/interactive'

# âš¡ æ€§èƒ½ä¼˜åŒ–

æ¬¢è¿æ¥åˆ°é«˜çº§æ•™ç¨‹ï¼åœ¨æœ¬è¯¾ç¨‹ä¸­ï¼Œä½ å°†å­¦ä¹ å¦‚ä½•åˆ©ç”¨ ECC è¿›è¡Œå…¨æ–¹ä½çš„æ€§èƒ½åˆ†æä¸ä¼˜åŒ– â€” è®©ä½ çš„åº”ç”¨åƒç«ç®­ä¸€æ ·é£é€Ÿè¿è¡Œã€‚

:::info å‰ç½®çŸ¥è¯†
å»ºè®®å…ˆå®Œæˆ [TDD å¤§å¸ˆè¯¾](./tdd-masterclass) å’Œ [è‡ªå®šä¹‰ Hooks å¼€å‘](./custom-hooks) ä¸¤ä¸ªè¿›é˜¶æ•™ç¨‹ã€‚
:::

## ğŸ® ä½“éªŒæ€§èƒ½åˆ†æå‘½ä»¤

ECC æä¾›äº†ä¸€å¥—å¼ºå¤§çš„æ€§èƒ½åˆ†æå·¥å…·é“¾ã€‚è¯•è¯•è¿™äº›å‘½ä»¤ï¼š

<CommandSimulator 
  availableCommands={['/perf analyze', '/perf profile --cpu', '/perf bundle-size', '/perf lighthouse']}
  commandOutputs={{
    '/perf analyze': 'âš¡ Performance Analyzer å¯åŠ¨ï¼\n\nğŸ“Š å…¨å±€æ€§èƒ½æŠ¥å‘Šï¼š\n\nğŸ” æ£€æµ‹åˆ° 5 ä¸ªæ€§èƒ½çƒ­ç‚¹ï¼š\n  1. âŒ æœªä¼˜åŒ–çš„æ•°æ®åº“æŸ¥è¯¢ï¼ˆN+1 é—®é¢˜ï¼‰\n     â†’ src/api/users.ts:42\n  2. âš ï¸ å¤§å‹ Bundle ä½“ç§¯ï¼ˆ1.2MBï¼‰\n     â†’ å»ºè®®å¯ç”¨ Tree Shaking\n  3. âš ï¸ æœªä½¿ç”¨ React.memo çš„é¢‘ç¹æ¸²æŸ“ç»„ä»¶\n     â†’ src/components/UserList.tsx\n  4. ğŸ’¡ å¯ç¼“å­˜çš„ API å“åº”\n     â†’ src/api/products.ts:18\n  5. ğŸ’¡ å›¾ç‰‡æœªä½¿ç”¨ next/image ä¼˜åŒ–\n     â†’ src/pages/home.tsx:55\n\nğŸ“ˆ ä¼˜åŒ–æ½œåŠ›ï¼šåŠ è½½é€Ÿåº¦å¯æå‡ 40%',
    '/perf profile --cpu': 'âš¡ CPU Profiler å¯åŠ¨ï¼\n\nğŸ”¥ CPU ç«ç„°å›¾åˆ†æï¼š\n\n  Top 5 è€—æ—¶å‡½æ•°ï¼š\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n  â”‚ calculatePermissions   â”‚ 34.2% â”‚\n  â”‚ parseJSON              â”‚ 22.1% â”‚\n  â”‚ renderUserList         â”‚ 15.3% â”‚\n  â”‚ validateSchema         â”‚ 12.8% â”‚\n  â”‚ formatCurrency         â”‚  8.4% â”‚\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nğŸ’¡ å»ºè®®ï¼šcalculatePermissions å¯ä½¿ç”¨ memoization ä¼˜åŒ–\nğŸ’¡ å»ºè®®ï¼šparseJSON è€ƒè™‘ä½¿ç”¨ streaming parser',
    '/perf bundle-size': 'ğŸ“¦ Bundle Size åˆ†æå™¨\n\nğŸ“Š å½“å‰ Bundle ç»„æˆï¼š\n  Total: 1.2MB (gzipped: 380KB)\n\n  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”\n  â”‚ lodash          â”‚ 280KB â”‚ 23.3% â”‚\n  â”‚ moment          â”‚ 220KB â”‚ 18.3% â”‚\n  â”‚ react-dom       â”‚ 180KB â”‚ 15.0% â”‚\n  â”‚ chart.js        â”‚ 150KB â”‚ 12.5% â”‚\n  â”‚ your code       â”‚ 120KB â”‚ 10.0% â”‚\n  â”‚ others          â”‚ 250KB â”‚ 20.9% â”‚\n  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜\n\nğŸ”§ ä¼˜åŒ–å»ºè®®ï¼š\n  1. lodash â†’ lodash-esï¼ˆTree Shakeableï¼‰\n  2. moment â†’ dayjsï¼ˆ2KB æ›¿ä»£å“ï¼‰\n  3. é¢„ä¼°èŠ‚çœï¼š450KBï¼ˆ37.5%ï¼‰',
    '/perf lighthouse': 'ğŸ—ï¸ Lighthouse æ€§èƒ½å®¡è®¡\n\nğŸ“Š è¯„åˆ†ï¼š\n  Performance:    72 ğŸŸ¡\n  Accessibility:  95 ğŸŸ¢\n  Best Practices: 88 ğŸŸ¢\n  SEO:            92 ğŸŸ¢\n\nâ± Core Web Vitalsï¼š\n  LCP: 3.2s âŒï¼ˆç›®æ ‡ < 2.5sï¼‰\n  FID: 120ms ğŸŸ¡ï¼ˆç›®æ ‡ < 100msï¼‰\n  CLS: 0.05 ğŸŸ¢ï¼ˆç›®æ ‡ < 0.1ï¼‰\n\nğŸ”§ Top 3 æ”¹è¿›å»ºè®®ï¼š\n  1. å»¶è¿ŸåŠ è½½é¦–å±å¤–å›¾ç‰‡\n  2. é¢„è¿æ¥å…³é”®ç¬¬ä¸‰æ–¹åŸŸå\n  3. å‡å°‘æœªä½¿ç”¨çš„ JavaScript'
  }}
/>

## ğŸ“š æ€§èƒ½ä¼˜åŒ–å››æ­¥æ³•

<StepByStep 
  title="ç³»ç»ŸåŒ–æ€§èƒ½ä¼˜åŒ–æµç¨‹"
  steps={[
    {
      title: 'ç¬¬ä¸€æ­¥ï¼šåº¦é‡ â€” çŸ¥å·±çŸ¥å½¼',
      description: 'æ€§èƒ½ä¼˜åŒ–çš„ç¬¬ä¸€æ¡é»„é‡‘æ³•åˆ™ï¼šä¸è¦çŒœæµ‹ï¼Œç”¨æ•°æ®è¯´è¯ã€‚å°±åƒåŒ»ç”Ÿçœ‹ç—…å…ˆåšæ£€æŸ¥ â€” ä½ éœ€è¦å…ˆ"è¯Šæ–­"æ‰èƒ½"å¼€è¯"ã€‚',
      code: '# Step 1: Measure current performance\n\n# Run full performance audit\n/perf analyze\n\n# Profile CPU usage\n/perf profile --cpu\n\n# Analyze bundle size\n/perf bundle-size\n\n# Run Lighthouse audit\n/perf lighthouse\n\n# Record baseline metrics\n/perf baseline --save',
      tip: 'æ°¸è¿œå…ˆå»ºç«‹æ€§èƒ½åŸºå‡†çº¿ï¼ˆbaselineï¼‰ï¼Œå¦åˆ™ä¼˜åŒ–åæ— æ³•é‡åŒ–æ”¹è¿›æ•ˆæœï¼'
    },
    {
      title: 'ç¬¬äºŒæ­¥ï¼šåˆ†æ â€” æ‰¾åˆ°ç“¶é¢ˆ',
      description: 'æ ¹æ®åº¦é‡æ•°æ®ï¼Œè¯†åˆ«æœ€å¤§çš„æ€§èƒ½ç“¶é¢ˆã€‚éµå¾ªå¸•ç´¯æ‰˜æ³•åˆ™ï¼ˆ80/20 åŸåˆ™ï¼‰â€” 20% çš„é—®é¢˜å¾€å¾€å¯¼è‡´ 80% çš„æ€§èƒ½æŸå¤±ã€‚',
      code: '# Prioritize by impact\n# Example analysis results:\n\n# HIGH IMPACT (fix first)\n# 1. N+1 database queries â†’ batch loading\n# 2. Oversized bundle (lodash + moment)\n\n# MEDIUM IMPACT\n# 3. Missing React.memo on list items\n# 4. Uncached API responses\n\n# LOW IMPACT (fix later)\n# 5. Unoptimized images\n\n# Use ECC to create optimization plan\n/plan optimize top 3 performance issues',
      tip: 'å…ˆè§£å†³å½±å“æœ€å¤§çš„é—®é¢˜ã€‚åˆ«åœ¨ä½å½±å“é¡¹ä¸Šæµªè´¹æ—¶é—´ â€” è¿™å«"è¿‡æ—©ä¼˜åŒ–"ï¼'
    },
    {
      title: 'ç¬¬ä¸‰æ­¥ï¼šä¼˜åŒ– â€” å¯¹ç—‡ä¸‹è¯',
      description: 'é’ˆå¯¹æ¯ä¸ªç“¶é¢ˆå®æ–½å…·ä½“çš„ä¼˜åŒ–æ–¹æ¡ˆã€‚ECC çš„ TDD æµç¨‹ç¡®ä¿ä¼˜åŒ–ä¸ä¼šå¼•å…¥æ–°çš„ bugã€‚',
      code: '# Fix #1: N+1 Query â†’ DataLoader\n/tdd --feature="dataloader-optimization"\n\n# Fix #2: Bundle Size â†’ Tree Shaking\n# Replace lodash with lodash-es\nnpm uninstall lodash\nnpm install lodash-es\n# Replace moment with dayjs\nnpm uninstall moment\nnpm install dayjs\n\n# Fix #3: React Memoization\n/tdd --feature="memoize-user-list"\n\n# Verify each fix individually\n/perf analyze --compare=baseline',
      tip: 'æ¯æ¬¡åªæ”¹ä¸€ä¸ªä¸œè¥¿ï¼å¤šé¡¹åŒæ—¶ä¿®æ”¹æ—¶æ— æ³•ç¡®å®šå“ªä¸ªæ”¹åŠ¨çœŸæ­£æœ‰æ•ˆã€‚'
    },
    {
      title: 'ç¬¬å››æ­¥ï¼šéªŒè¯ â€” æŒç»­ç›‘æ§',
      description: 'ä¼˜åŒ–å®Œæˆåï¼Œé‡æ–°åº¦é‡å¹¶ä¸åŸºå‡†çº¿å¯¹æ¯”ã€‚è®¾ç½®æ€§èƒ½é¢„ç®—ï¼ˆPerformance Budgetï¼‰é˜²æ­¢æ€§èƒ½é€€åŒ– â€” å°±åƒç»™æ”¯å‡ºè®¾ä¸Šé™ä¸€æ ·ã€‚',
      code: '# Compare with baseline\n/perf analyze --compare=baseline\n\n# Set performance budget in CI\n# performance-budget.json\n{\n  "bundles": [\n    {\n      "name": "main",\n      "maxSize": "200KB"\n    }\n  ],\n  "lighthouse": {\n    "performance": 90,\n    "lcp": "2.5s",\n    "fid": "100ms",\n    "cls": 0.1\n  }\n}\n\n# Add to preCommit hooks\n/hooks add perf-budget --preCommit',
      tip: 'æ€§èƒ½é¢„ç®—æ˜¯é˜²æ­¢é€€åŒ–çš„æœ€å¥½æ‰‹æ®µã€‚å°±åƒ TDD é˜²æ­¢åŠŸèƒ½é€€åŒ–ä¸€æ ·ï¼'
    }
  ]}
/>

## ğŸ’» å®æˆ˜ï¼šä¼˜åŒ– React ç»„ä»¶æ€§èƒ½

åœ¨ä»£ç å®éªŒå®¤ä¸­å®è·µ React æ€§èƒ½ä¼˜åŒ–çš„æ ¸å¿ƒæŠ€å·§ï¼š

<CodePlayground 
  title="React æ€§èƒ½ä¼˜åŒ–å®æˆ˜"
  language="typescript"
  initialCode={`// Before: Unoptimized component
// Every parent re-render causes ALL items to re-render

import { useState, useMemo, useCallback, memo } from 'react'

// âŒ BEFORE: No memoization
function UserListBefore({ users, onSelect }) {
  return (
    <ul>
      {users.map(user => (
        <li key={user.id} onClick={() => onSelect(user.id)}>
          {user.name} - {formatRole(user.role)}
        </li>
      ))}
    </ul>
  )
}

// âœ… AFTER: Optimized with memo + useCallback
const UserItem = memo(function UserItem({ user, onSelect }) {
  return (
    <li onClick={() => onSelect(user.id)}>
      {user.name} - {formatRole(user.role)}
    </li>
  )
})

function UserListAfter({ users, onSelect }) {
  // Memoize the callback to prevent unnecessary re-renders
  const handleSelect = useCallback((id: string) => {
    onSelect(id)
  }, [onSelect])

  // Memoize expensive computation
  const sortedUsers = useMemo(() => 
    [...users].sort((a, b) => a.name.localeCompare(b.name)),
    [users]
  )

  return (
    <ul>
      {sortedUsers.map(user => (
        <UserItem 
          key={user.id} 
          user={user} 
          onSelect={handleSelect} 
        />
      ))}
    </ul>
  )
}

// Helper function
function formatRole(role: string): string {
  return role.charAt(0).toUpperCase() + role.slice(1)
}

// Try it: Add virtualization for large lists
// Hint: Use react-window or @tanstack/virtual`}
/>

## â“ çŸ¥è¯†æ£€æµ‹

<Quiz 
  question="æ€§èƒ½ä¼˜åŒ–çš„ç¬¬ä¸€æ­¥åº”è¯¥æ˜¯ä»€ä¹ˆï¼Ÿ"
  options={[
    'ç«‹å³å¼€å§‹é‡å†™æ…¢çš„ä»£ç ',
    'å‡çº§åˆ°æœ€æ–°ç‰ˆæœ¬çš„æ¡†æ¶',
    'åº¦é‡å½“å‰æ€§èƒ½ï¼Œå»ºç«‹åŸºå‡†çº¿',
    'æ·»åŠ æ›´å¤šç¼“å­˜'
  ]}
  correctAnswer={2}
  explanation="æ€§èƒ½ä¼˜åŒ–çš„é»„é‡‘æ³•åˆ™ï¼šå…ˆåº¦é‡ï¼Œåä¼˜åŒ–ã€‚æ²¡æœ‰åŸºå‡†çº¿å°±æ— æ³•é‡åŒ–ä¼˜åŒ–æ•ˆæœï¼Œä¹Ÿæ— æ³•åˆ¤æ–­ä¼˜åŒ–æ–¹å‘æ˜¯å¦æ­£ç¡®ã€‚å°±åƒå‡è‚¥å‰å…ˆç§°ä½“é‡ä¸€æ · â€” å¦åˆ™æ€ä¹ˆçŸ¥é“ç˜¦äº†å¤šå°‘ï¼Ÿ"
/>

<Quiz 
  question="ä»¥ä¸‹å“ªç§æ–¹å¼æœ€èƒ½æœ‰æ•ˆå‡å°‘ JavaScript Bundle ä½“ç§¯ï¼Ÿ"
  options={[
    'å‹ç¼©æ‰€æœ‰å˜é‡å',
    'ç”¨ Tree Shaking ç§»é™¤æœªä½¿ç”¨çš„ä»£ç  + æ›¿æ¢è½»é‡åº“',
    'å°†æ‰€æœ‰ä»£ç åˆå¹¶åˆ°ä¸€ä¸ªæ–‡ä»¶',
    'åˆ é™¤ä»£ç æ³¨é‡Š'
  ]}
  correctAnswer={1}
  explanation="Tree Shaking å¯ä»¥è‡ªåŠ¨ç§»é™¤æœªä½¿ç”¨çš„å¯¼å‡ºï¼Œé…åˆæ›¿æ¢è½»é‡æ›¿ä»£åº“ï¼ˆå¦‚ moment â†’ dayjs èŠ‚çœ 218KBï¼‰ï¼Œæ˜¯å‡å° Bundle ä½“ç§¯æœ€æœ‰æ•ˆçš„æ–¹å¼ã€‚å‹ç¼©å˜é‡ååªæ˜¯æœ€åä¸€æ­¥çš„ minificationã€‚"
/>

<Quiz 
  question="React.memo çš„æ­£ç¡®ä½¿ç”¨åœºæ™¯æ˜¯ï¼Ÿ"
  options={[
    'æ‰€æœ‰ç»„ä»¶éƒ½åº”è¯¥ç”¨ React.memo åŒ…è£¹',
    'ä»…ç”¨äºæ¥æ”¶ç¨³å®š props ä¸”æ¸²æŸ“å¼€é”€å¤§çš„ç»„ä»¶',
    'ä»…ç”¨äºç±»ç»„ä»¶',
    'ä»…ç”¨äºæ ¹ç»„ä»¶'
  ]}
  correctAnswer={1}
  explanation="React.memo é€‚ç”¨äºï¼š(1) æ¥æ”¶çš„ props å˜åŒ–é¢‘ç‡ä½äºçˆ¶ç»„ä»¶æ¸²æŸ“é¢‘ç‡ï¼Œ(2) ç»„ä»¶æ¸²æŸ“å¼€é”€è¾ƒå¤§ã€‚æ»¥ç”¨ memo åè€Œä¼šå¢åŠ å†…å­˜å¼€é”€å’Œæ¯”è¾ƒæˆæœ¬ã€‚è®°ä½ï¼šä¸è¦è¿‡æ—©ä¼˜åŒ–ï¼Œå…ˆç”¨ Profiler ç¡®è®¤ç“¶é¢ˆï¼"
/>

## ğŸ‰ æ­å–œï¼

ä½ å·²å®Œæˆæ€§èƒ½ä¼˜åŒ–æ•™ç¨‹ï¼ä½ æŒæ¡äº†ï¼š

- âœ… æ€§èƒ½ä¼˜åŒ–å››æ­¥æ³•ï¼šåº¦é‡ â†’ åˆ†æ â†’ ä¼˜åŒ– â†’ éªŒè¯
- âœ… ECC æ€§èƒ½åˆ†æå·¥å…·é“¾
- âœ… Bundle ä½“ç§¯ä¼˜åŒ–ç­–ç•¥
- âœ… React ç»„ä»¶æ€§èƒ½ä¼˜åŒ–ï¼ˆmemo/useMemo/useCallbackï¼‰
- âœ… æ€§èƒ½é¢„ç®—ä¸æŒç»­ç›‘æ§

## ğŸ“– ä¸‹ä¸€æ­¥

- [å®‰å…¨æœ€ä½³å®è·µ](./security-best-practices) - æ„å»ºå®‰å…¨çš„åº”ç”¨
- [ä¼ä¸šçº§æ¨¡å¼](./enterprise-patterns) - å¤§å‹é¡¹ç›®æ¶æ„
- [é«˜çº§ä¸»é¢˜ï¼šæ€§èƒ½ä¼˜åŒ–è¯¦è§£](/docs/advanced/performance) - æ·±å…¥æ€§èƒ½è°ƒä¼˜
